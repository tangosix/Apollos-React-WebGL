(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{238:function(n,e,t){n.exports=t(514)},257:function(n,e){},259:function(n,e){},275:function(n,e){},277:function(n,e){},443:function(n,e){},511:function(n,e,t){},514:function(n,e,t){"use strict";t.r(e);var o=t(11),i=t.n(o),s=t(231),a=t.n(s),r=t(517),l=t(232),c=t(233),u=t(236),d=t(234),g=t(237),y=t(92),h=t(142),p=t.n(h),f=new y.AppConfig(["store_write","publish_data"]),w=new y.UserSession({appConfig:f}),m="800px",v=800,C="480px",I=480,U=function(n){function e(n){var t;return Object(l.a)(this,e),(t=Object(u.a)(this,Object(d.a)(e).call(this,n))).resized=!1,t.unityContent=new h.UnityContent("Build/Apollos - WebGL Build.json","Build/UnityLoader.js",{adjustOnWindowResize:!0}),t.unityContent.on("progress",function(n){try{t.unityProgress(n)}catch(e){console.log(e)}}),t.unityContent.on("Login",function(){try{t.handleSignIn()}catch(n){console.log(n)}}),t.unityContent.on("IsLoggedIn",function(){try{w.isUserSignedIn()?t.sendUserData():w.isSignInPending()?w.handlePendingSignIn().then(function(n){t.sendUserData()}).catch(function(n){console.log(n),n.message.includes("Existing user session")?t.sendUserData():t.unityContent.send("UI","OnUserNotLoggedIn")}):t.unityContent.send("UI","OnUserNotLoggedIn")}catch(n){console.log(n)}}),t.unityContent.on("Logout",function(){try{w.signUserOut()}catch(n){console.log(n)}}),t.unityContent.on("SavePlayerData",function(n){try{w.putFile("apollos_player_data.json",n,{encrypt:!1})}catch(e){console.log(e)}}),t.unityContent.on("RequestPlayerData",function(){try{w.getFile("apollos_player_data.json",{decrypt:!1}).then(function(n){try{var e=JSON.parse(n||""),o=JSON.stringify(e);t.unityContent.send("UI","ReceivePlayerData",o)}catch(i){console.log(i),t.unityContent.send("UI","ReceivePlayerData","")}}).catch(function(n){console.log(n),t.unityContent.send("UI","ReceivePlayerData","")})}catch(n){console.log(n)}}),t}return Object(g.a)(e,n),Object(c.a)(e,[{key:"handleSignIn",value:function(){var n=this;try{w.isUserSignedIn()?this.sendUserData():w.isSignInPending()?w.handlePendingSignIn().then(function(e){n.sendUserData()}).catch(function(n){console.log(n),w.redirectToSignIn()}):w.redirectToSignIn()}catch(e){console.log(e)}}},{key:"unityProgress",value:function(n){var e=this.unityContent.unityInstance;e.Module&&(e.logo||(e.logo=document.createElement("div"),e.logo.className="logo "+e.Module.splashScreenStyle,e.container.appendChild(e.logo)),e.progress||(e.progress=document.createElement("div"),e.progress.className="progress "+e.Module.splashScreenStyle,e.progress.empty=document.createElement("div"),e.progress.empty.className="empty",e.progress.appendChild(e.progress.empty),e.progress.full=document.createElement("div"),e.progress.full.className="full",e.progress.appendChild(e.progress.full),e.container.appendChild(e.progress)),e.progress.empty.style.width=100*n+"%",e.progress.full.style.width=100*(1-n)+"%",1===n&&(e.logo.style.display=e.progress.style.display="none"),this.resized||(this.resizeWindow(),this.resized=!0))}},{key:"sendUserData",value:function(n){try{void 0===n&&(n=w.loadUserData());var e=new y.Person(n.profile),t=n.username.split(".")[0]+";"+e.avatarUrl();this.unityContent.send("UI","OnUserLoggedIn",t)}catch(o){console.log(o)}}},{key:"handleSignOut",value:function(){try{w.signUserOut(window.location.origin)}catch(n){console.log(n)}}},{key:"setFullScreen",value:function(){try{this.unityContent.unityInstance.SetFullscreen(1)}catch(n){console.log(n)}}},{key:"resizeWindow",value:function(){var n,e,t=this.unityContent.unityInstance,o=t.Module.canvas,i=t.container;n=window.innerWidth,e=window.innerHeight;var s=I/v;n*s>window.innerHeight&&(n=Math.min(n,Math.ceil(e/s))),e=Math.floor(n*s),o.style.width="100%",o.style.height="100%",i.style.width=n+"px",i.style.height=e+"px",i.style.top=Math.floor((window.innerHeight-e)/4)+"px",i.style.left=Math.floor((window.innerWidth-n)/4)+"px"}},{key:"componentDidMount",value:function(){window.onresize=this.resizeWindow.bind(this)}},{key:"render",value:function(){return i.a.createElement("div",{className:"webgl-content"},i.a.createElement(p.a,{unityContent:this.unityContent,width:m,height:C,className:"unityContainer"}))}}]),e}(o.Component);t(510),t(511);a.a.render(i.a.createElement(r.a,null,i.a.createElement(U,null)),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.57497ef0.chunk.js.map