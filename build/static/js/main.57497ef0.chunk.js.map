{"version":3,"sources":["App.js","index.js"],"names":["appConfig","AppConfig","userSession","UserSession","unityContainerStyle","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","resized","unityContent","UnityContent","adjustOnWindowResize","on","progress","unityProgress","error","console","log","handleSignIn","isUserSignedIn","sendUserData","isSignInPending","handlePendingSignIn","then","userData","catch","err","message","includes","send","signUserOut","data","putFile","encrypt","getFile","decrypt","file","playerData","JSON","parse","playerDataString","stringify","_this2","redirectToSignIn","unityInstance","Module","logo","document","createElement","className","splashScreenStyle","container","appendChild","empty","full","style","width","display","resizeWindow","undefined","loadUserData","person","Person","profile","dataToSend","username","split","avatarUrl","window","location","origin","SetFullscreen","w","h","gameInstance","canvas","innerWidth","innerHeight","r","Math","min","ceil","floor","height","top","left","onresize","bind","react_default","a","Exports_default","Component","ReactDOM","render","BrowserRouter","App_App","getElementById"],"mappings":"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","file":"static/js/main.57497ef0.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { UserSession, AppConfig, Person } from \"blockstack\";\nimport Unity, { UnityContent } from \"react-unity-webgl\";\n\nconst appConfig = new AppConfig([\"store_write\", \"publish_data\"]);\nconst userSession = new UserSession({ appConfig: appConfig });\nconst unityContainerStyle = {\n  width: \"800px\",\n  widthValue: 800,\n  height: \"480px\",\n  heightValue: 480\n};\n\nexport default class App extends Component {\n  resized = false;\n\n  constructor(props) {\n    super(props);\n    this.unityContent = new UnityContent(\n      \"Build/Apollos - WebGL Build.json\",\n      \"Build/UnityLoader.js\",\n      { adjustOnWindowResize: true }\n    );\n\n    this.unityContent.on(\"progress\", progress => {\n      try {\n        this.unityProgress(progress);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.unityContent.on(\"Login\", () => {\n      try {\n        this.handleSignIn();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.unityContent.on(\"IsLoggedIn\", () => {\n      try {\n        if (userSession.isUserSignedIn()) {\n          this.sendUserData();\n        } else if (userSession.isSignInPending()) {\n          userSession\n            .handlePendingSignIn()\n            .then(userData => {\n              this.sendUserData();\n            })\n            .catch(err => {\n              console.log(err);\n              if (err.message.includes(\"Existing user session\")) {\n                this.sendUserData();\n              } else {\n                this.unityContent.send(\"UI\", \"OnUserNotLoggedIn\");\n              }\n            });\n        } else {\n          this.unityContent.send(\"UI\", \"OnUserNotLoggedIn\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.unityContent.on(\"Logout\", () => {\n      try {\n        userSession.signUserOut();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.unityContent.on(\"SavePlayerData\", data => {\n      try {\n        const options = { encrypt: false };\n        userSession.putFile(\"apollos_player_data.json\", data, options);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    this.unityContent.on(\"RequestPlayerData\", () => {\n      try {\n        const options = { decrypt: false };\n        userSession\n          .getFile(\"apollos_player_data.json\", options)\n          .then(file => {\n            try {\n              var playerData = JSON.parse(file || \"\");\n              var playerDataString = JSON.stringify(playerData);\n              this.unityContent.send(\n                \"UI\",\n                \"ReceivePlayerData\",\n                playerDataString\n              );\n            } catch (error) {\n              console.log(error);\n              this.unityContent.send(\"UI\", \"ReceivePlayerData\", \"\");\n            }\n          })\n          .catch(error => {\n            console.log(error);\n            this.unityContent.send(\"UI\", \"ReceivePlayerData\", \"\");\n          });\n      } catch (error) {\n        console.log(error);\n      }\n    });\n  }\n\n  handleSignIn() {\n    try {\n      if (userSession.isUserSignedIn()) {\n        this.sendUserData();\n      } else if (userSession.isSignInPending()) {\n        userSession\n          .handlePendingSignIn()\n          .then(userData => {\n            this.sendUserData();\n          })\n          .catch(err => {\n            console.log(err);\n            userSession.redirectToSignIn();\n          });\n      } else {\n        userSession.redirectToSignIn();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  unityProgress(progress) {\n    const unityInstance = this.unityContent.unityInstance;\n    if (!unityInstance.Module) return;\n    if (!unityInstance.logo) {\n      unityInstance.logo = document.createElement(\"div\");\n      unityInstance.logo.className =\n        \"logo \" + unityInstance.Module.splashScreenStyle;\n      unityInstance.container.appendChild(unityInstance.logo);\n    }\n    if (!unityInstance.progress) {\n      unityInstance.progress = document.createElement(\"div\");\n      unityInstance.progress.className =\n        \"progress \" + unityInstance.Module.splashScreenStyle;\n      unityInstance.progress.empty = document.createElement(\"div\");\n      unityInstance.progress.empty.className = \"empty\";\n      unityInstance.progress.appendChild(unityInstance.progress.empty);\n      unityInstance.progress.full = document.createElement(\"div\");\n      unityInstance.progress.full.className = \"full\";\n      unityInstance.progress.appendChild(unityInstance.progress.full);\n      unityInstance.container.appendChild(unityInstance.progress);\n    }\n    unityInstance.progress.empty.style.width = 100 * progress + \"%\";\n    unityInstance.progress.full.style.width = 100 * (1 - progress) + \"%\";\n    if (progress === 1)\n      unityInstance.logo.style.display = unityInstance.progress.style.display =\n        \"none\";\n    if (!this.resized) {\n      this.resizeWindow();\n      this.resized = true;\n    }\n  }\n\n  sendUserData(userData) {\n    try {\n      if (userData === undefined) {\n        userData = userSession.loadUserData();\n      }\n      var person = new Person(userData.profile);\n      var dataToSend =\n        userData.username.split(\".\")[0] + \";\" + person.avatarUrl();\n      this.unityContent.send(\"UI\", \"OnUserLoggedIn\", dataToSend);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleSignOut() {\n    try {\n      userSession.signUserOut(window.location.origin);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  setFullScreen() {\n    try {\n      this.unityContent.unityInstance.SetFullscreen(1);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  resizeWindow() {\n    var scaleToFit = true;\n    var gameInstance = this.unityContent.unityInstance;\n    var canvas = gameInstance.Module.canvas;\n    var container = gameInstance.container;\n    var w;\n    var h;\n\n    if (scaleToFit) {\n      w = window.innerWidth;\n      h = window.innerHeight;\n\n      var r = unityContainerStyle.heightValue / unityContainerStyle.widthValue;\n\n      if (w * r > window.innerHeight) {\n        w = Math.min(w, Math.ceil(h / r));\n      }\n      h = Math.floor(w * r);\n    } else {\n      w = unityContainerStyle.widthValue;\n      h = unityContainerStyle.heightValue;\n    }\n    canvas.style.width = \"100%\";\n    canvas.style.height = \"100%\";\n    container.style.width = w + \"px\";\n    container.style.height = h + \"px\";\n    container.style.top = Math.floor((window.innerHeight - h) / 4) + \"px\";\n    container.style.left = Math.floor((window.innerWidth - w) / 4) + \"px\";\n  }\n\n  componentDidMount() {\n    window.onresize = this.resizeWindow.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"webgl-content\">\n        <Unity\n          unityContent={this.unityContent}\n          width={unityContainerStyle.width}\n          height={unityContainerStyle.height}\n          className=\"unityContainer\"\n        />\n        {/* <div className=\"footer\">\n          <div className=\"webgl-logo\"></div>\n          <button\n            className=\"fullscreen\"\n            onClick={this.setFullScreen.bind(this)}\n          ></button>\n          <div className=\"title customtitle\">Fullscreen</div>\n        </div> */}\n      </div>\n    );\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}